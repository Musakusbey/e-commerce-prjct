name: CI/CD Pipeline

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main, develop ]

jobs:
  test-and-build:
    runs-on: ubuntu-latest
      
    steps:
    - name: ğŸš€ Reponun KopyasÄ±nÄ± Al
      uses: actions/checkout@v3
    
    - name: ğŸ“¦ Node.js Kurulumu
      uses: actions/setup-node@v3
      with:
        node-version: '18'
        cache: 'npm' # Ã–nceki baÄŸÄ±mlÄ±lÄ±klarÄ± Ã¶nbellekten yÃ¼kler, hÄ±z kazandÄ±rÄ±r.
    
    - name: ğŸ“‚ BaÄŸÄ±mlÄ±lÄ±klarÄ± YÃ¼kle
      run: npm ci
    
    - name: ğŸ” Lint KontrolÃ¼
      run: npm run lint
    
    - name: ğŸ” GÃ¼venlik TaramasÄ±
      run: npm run security-check || echo "âš ï¸ GÃ¼venlik hatasÄ± var, kontrol et!"

    - name: ğŸ§ª Testleri Ã‡alÄ±ÅŸtÄ±r
      run: npm test

    - name: ğŸ—ï¸ Build AÅŸamasÄ±
      run: npm run build

    # EÄŸer performance-test script'in yoksa bu kÄ±smÄ± yorum satÄ±rÄ±na al.
    - name: ğŸš€ Performans Testi Ã‡alÄ±ÅŸtÄ±r
      run: npm run performance-test || echo "âš ï¸ Performans testi baÅŸarÄ±sÄ±z, incele!"
  